apiVersion: metallb.io/v1beta1
kind: IPAddressPool
metadata:
  name: main-pool
spec:
  addresses:
    - 192.168.8.0/24
  avoidBuggyIPs: true
---
apiVersion: metallb.io/v1beta1
kind: BFDProfile
metadata:
  name: main
spec:
  receiveInterval: 100
  transmitInterval: 100
---
apiVersion: metallb.io/v1beta2
kind: BGPPeer
metadata:
  name: unifi
spec:
  bfdProfile: main
  myASN: 65001
  peerASN: 65000
  peerAddress: 192.168.0.1
  peerPort: 179
  disableMP: false
---
apiVersion: metallb.io/v1beta1
kind: BGPAdvertisement
metadata:
  name: main
spec:
  ipAddressPools:
    - main-pool
  peers:
    - unifi
  # nodeSelectors:
  #   - matchLabels:
  #       kubernetes.io/hostname: k0s-worker
