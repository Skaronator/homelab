image:
  repository: "plexinc/pms-docker"
  tag: "1.41.3.9314-a0bfb8370@sha256:df83b2bbf4bbb790dadd490ad0e1d2222bbf641466c6be6bb8e35515585eb458"

ports:
- name: main
  containerPort: 32400
  hostPort: 32400
- name: roku
  containerPort: 8324
  hostPort: 8324
- name: gdm-32410
  containerPort: 32410
  hostPort: 32410
  protocol: UDP
- name: gdm-32412
  containerPort: 32412
  hostPort: 32412
  protocol: UDP
- name: gdm-32413
  containerPort: 32413
  hostPort: 32413
  protocol: UDP
- name: gdm-32414
  containerPort: 32414
  hostPort: 32414
  protocol: UDP

health:
  path: /identity
  type: HTTPS

service:
  type: LoadBalancer
  externalTrafficPolicy: Local
  loadBalancerIP: 192.168.0.241

envs:
- ADVERTISE_IP: "http://192.168.0.241:32400/"

resources:
  limits:
    gpu.intel.com/i915: "1"

# hostPaths:
# - name: data
#   hostPath: /srv/nvme/container-data/plex
#   containerPath: /config
# - name: transcode
#   hostPath: /srv/nvme/scrap-data/plex-transcode-cache
#   containerPath: /transcode
# - name: multimedia
#   hostPath: /srv/hdd/multimedia
#   containerPath: /srv/multimedia
#   readOnly: true
# - name: pictures
#   hostPath: /srv/nvme/pictures
#   containerPath: /srv/pictures
#   readOnly: true
# - name: music
#   hostPath: /srv/nvme/music
#   containerPath: /srv/music
#   readOnly: true

volumes:
  - name: data
    storageClass: container-data
    containerPath: /config
  - name: transcode
    storageClass: container-data
    containerPath: /transcode
  - name: multimedia
    storageClass: multimedia
    containerPath: /srv/multimedia
    readOnly: true
