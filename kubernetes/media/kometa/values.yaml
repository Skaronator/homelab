image:
  repository: "kometateam/kometa"
  tag: "v2.2.1@sha256:83b071e96526fc8d29a4101304a1bc0e5363cedbeec8d6b79293c9316f967d4d"

schedule: "0 6 * * *"

envs:
  - KOMETA_READ_ONLY_CONFIG: true
  - KOMETA_RUN: true
  - KOMETA_CONFIG: /config/config.yaml
  - KOMETA_WIDTH: 200

secretEnvs:
  - KOMETA_SECRET_PLEX_TOKEN: AgCE1JznAFIPoDkYzEKXA6vKZvaXw7abEusn/GqgSkkGR2ss9x+3BnQcxxsy6/SAYxb5JH3F8iYt1GZqPj1PI+YMK5PPD2QTqBbWWvsflnVpRSzjNGIQW0YvQSOwui5SM2QIKPvf9f4CtgkkZv++WY9E/GlH1UDcllJJOJszLlS0A+D7RwaM5mXic6ONhsCnUdtr/uEgDZJXIxxplKU2dTf3bAdJrTxK9KWM7WGtLlr/y4h4tdx10Ww17uilyN7ran9lpKmetYSE1QReUO9v/TH4k5fRh7WmX/y4x7+kB/9PdJy4zEiFzxf+pJNHgctxZLwHwtMZmzoojKuHZfv0GZXf/gdnRJC+XljehS5UbY3YgvePJ3UvYAU/cnrzdBpYP7omlCIwmAEegHP1GduWJFm+zQcUsdrRaxN/JajzFmXFhDobK7SAPSteSBh3cvLRD+sCMD1dN5qPizk1fkPMLP8KAda9KfDub1j+j3Yxgydmra3Y+9+LWK3de71M2jUW817+TW55ZeuGlnn1qdEf3UAkxF90gJOGNNIxrSnxJBzV3zByFERh6on82B5i+f8eBbNytxlXqP4Slgm+UBa0m/R9FXDdtcqJqwCuwiXK78lTpigE48U9byLA7H55DaKTRvLmBNcep/tthIqHBj97N2m09PrH09Vxmgtw/2mw3bQ92UyFjUHEflqbOZq/4kQZCcEs8hy/Eno5l8m7KI5cmfYQglDQVA==
  - KOMETA_SECRET_TMDB_API_KEY: AgBoSroEUo97+DHbaYdw5h7oySTOVJtVcXWoIuf7OvkMHNWu0o/0ch+6zjIjjjgYnLl05x+N1v9t364PflZPa9/HI8xbzCqBKQ/3+SajreXjZq/jKQGbCPdAdAPedU+4+wl3+zBmUKREH+FSNWw4ycqbPa143QYtY0SqXGHT6MIB+zlsCopFi3o1X+O0QMsh66tJl7lexVQPRGEHPcLAVXDdQd0orugB+Px+yWQMtnvt9E258M7pESCL1Y65u+uLnYgfT2oyMvrQZHtWXI+Miutr+BlAJJ0dr0rNTRQ/cTAhl44y6PPnoPnZB2/+dRdrMg3D9yCdOvoEiuQaDUeyvm6VewIr+tu2iQtOfbZxWhbxa1t0TtI18nmh5Bwqr9b22QX6UxUrpxnGX36RvT3ZZyAqRmRp6qUhUzA3Nw17oTrmBTBHyAER0Y8ELfxX+bvW4FGzO+EdSZy8E1WZVWpmaXRRpOZ8SeVoq8oko1iiVbiQuTu53vfduLImqCkupGsSgBthf+gOM5gX2AaPoZpslK1HpHqLzmW/3wSzH+Mw9KgdPeXaJ0BMyMEbVArpXD/DPuQqJ5tn8cjX44hTf/ryZMsJY7y0WMDXpUbYiD3G22vtcs+8yyleFRy76oQ5AnT9PxIj7nQ3CCKk0Zcfx5PK/xY0dTaJS63luGQSZEo68s75lWojqRzMZvBflADlqKx4wMDGJuads7oJBZvifoLQ0lZfU5E5qQKRnlbjhzFoMfQ+EA==
  # TODO: Fix trakt tokens
  - KOMETA_SECRET_TRAKT_CLIENT_ID: AgCZvuTtU8QnU6Srv0dK6u/CxxEZ8EFDo6yu9bsJ7W4tnJL0znAorHUWn+X8lnAd3/QmzTzsRdC8YNogFldvtF1THRVU4hmkKUVQ2bH/gi4JQos1GgbH2wIJOq6keiG3/u9YjrczHAnqANKfBEJYZjCHu9Oy093XJ8GP/aNbJuz6Xw2E4n/aAwwIgN4k7o5dpLHYGHYwfRUDK6h+2dpSjnVSLGTPnvhpmTlmyTjYZmHufxrpN+MonK3GN9aFnSWgBNJK4hi1EbueXZqwEzm/aLUeDHUKpNGGcEEarhSAo97mL0IGxvn7/H5WvvJtf9L4bS7ktKquTePHo6uGYnZx8LBjdRslyPQPbXlOg5Nr/gJvDg+jZ7i8Co6hnjej0L9gznZVpBj4s5CowbwRxX5sACf3eUK3mRx4fEenJrQx9oYs557OkvWyNEtfPAbj6g0i2vUnzU2D8LJXeDmAYEcm1cccHMiNZLtCHWFeysmHwyYD/Gd/Ij8HW6LSp1owQYbVw4tHDgUBBfRC3FH6rIdiw8bBCBF1+stimm/Skx8PaTaOP1gIJ9CvKGXHlpHhgymAmtEhBdp8x1TzbRVx4ucMdX3mS1zGh8bYX1Afyj53IeFrA0tTFHkdZIFasx+1j3GX5L6ivHdplI6Avni8Orhy8Wc1JSsSW3hE20Y3r2EKuFkaFBGneP3BM3oJ42eV/ZdxpK3eunVyF/QIHk4yQUL/fZXL0/gyzRd6/JL+N2pHnCD7RyFWNtECoqL/1SNkPbQHLIOZhpK1pjK4SORwsXwmg+22
  - KOMETA_SECRET_TRAKT_CLIENT_SECRET: AgBBrXBzPIMN+/WxcDcfYORlMHzjHNx2xKbHJL3ABOpLWaAdnon0mNZA/SxlpCogXcHUrMcAfekTOkGPczURa6YF3TJhVaYqL3EzYGw587wQC3YRGm+k9gGs6hU8ftrmoqucGGRhUBkKInIiWtC2WjWzMTCkSi657tVkOlPznlSyBd+3HNjb6LDsC2nxJiy9f9V8e2sJUEjRghL6P6YEKvgH0/UIHxcZlQJnEDKOs27xKLYzxJvnw26ob8A3v3WmDCYQa5M3nPiPEiNmSFXjHftvhhpKkUjaOkNQ8POkL2We1Th8KhNW8u8HcMlylFIzvPdkfnoal9UlBoRXbi+6rtiAYIFK9Iw/XR1hgmGyHWBMKBLJKveHUG5WxO1+idkI/an/v+hH+PIukg4vorxoQ9vI+oex6CG3V7lKDuan9/mlcGW3Pfu2L9mO00+Hb0e/e3t2okLX+7ctJXUz2vBGpPYrp47GQFhIZWU3WI66VfAP3ckEQHmP4CYvojNRjUF90u/7zGEArqf2XfJkoUXIgBBun8cwlLsRXFSvtVhH21Ks3lFIpHma794+JNWHefOUuIQbShZwQleFJ6BG4qOFGpmNslBl7UVzKgZ/wdyHLf1Q4MugbPVaXmAjL/rg8Z7YY1X0iZeVdrbi4jcgTR8TlIFfpuVfNV2/ewrhDOgveOYbUkJkaXO2YwOfJiy8KL+lEHb4xO8m/S34BdMWnuQ2zc/l5sY4GbpngwxUz3AvxLoNyQ0N1uXG63KyoetikqOBOZ7vZ+e0h3BZhN65VSTRJk73
  - KOMETA_SECRET_TRAKT_ACCESS_TOKEN: AgCDvNLLDgcWkyS2cev9U6aaxJte4fC9OOAXPaag3rLEtTl9VlKZWb9lOQcoz+bXeBUelvvbe010RypufvPtLA3GDNFd+C+wlJCjzIoqDbQf1HuJqPt5PIQnnr28ffB7GmuBWOHgRyuwluMzMruRCCfNXBlXRBOnKx2Sdf+bF/T/JQS/W1H3CRj0vhF3JbgszcFZE0MpLYhWSUHOOBaqQz2uw6VM3djfqj0MizJgOr7jFOVsfICvE7jq43gq+p99iNmA4uzz9hRCEdwAJQxobhN2wMMUM4n5RWtuZf4uhtApO7IKMUpIn8VJEOWR8LdkDiX4gocAQ4hzKokgvsofI7rRcj6dXeyOxVJmcMx/XI6TV+mQbSwqfwsdCjH7oQwyyUQtb1cMI/LPjmNq0NAQ+4GkegMjS0vwJEre1//4EAnalo1tsEdw5saO3Uefdr99RYWVbS4pwVuFgz7VHu4r/thdD9t1CsGNEl+W94NPI4LPAvJvmFmrQLMFPkyGlP8Lq4xqaaO7aQH+ulnhBnjppE41KT8oTd7t9MEdlWIGWCC+B48UW0o/WLsaho+7P6TgGE6zT59/yXJ4v7E59uQBI2KB8BQ7dk4tfS5lsJ4Mb/q03ps4IXUfdcuOzqdNlJUn4M+GB/m2UCTsH01YqS/euWT5j6FamFHQx4pOIyek/LUz55CrODGO0LzRJDG+mKRk6i+ANnE/iHXv7DKrzRpqaZAOfSOtd9axSSkMD3Du/K0Oha5VjSSc2NYzhVJIpDPYzYhhZGQkPiI4bViHRMymOMmA
  - KOMETA_SECRET_TRAKT_REFRESH_TOKEN: AgCaYCqkMwGq86S0XvkWNDif8fJt8TT4gLzrvNaps+Dws2Z8FHunvLFqbeBvjnKZ/Pq1PTh/pG2wHorFx3L9pFKJH9nPsOx9s119NQPkgHzrqprmDhUckdCtWTC50VtWp7Oae3/U1X13Kj5mxb7j0t0dAsEVgC4l2L8GZrbd/lYpH/+6Sg2qlu8w+iTI/T4NdjN1+YA/Rludt2BkJ+shJM5J2PLAf5IbTUxJggzfsMidjiJkId+8KXHRCvPQaLzt9InRC/gsgEWSa1Ofe7/KcFqDfrJo9TWSzRFspz6cNh+bwFsDsHI13Q//77GLXhbaM3fpMMzXe71tR6AyB7tpqi1qj8GwUTB5gTNFihR7Q59an1ylsw1hX55jmX5zD7DkcRdf3n6VvYExQxGaFCc56ZAcIprQnyRwRZFqoV8QTVssSat9jp5QZhnASMRr4lqFB8LAsOVZ0L+TycxbAro5kj8yLTo2ghqBimweS06etO2PVWNjCYuOzdqFLkB3Zjv+rlJ4oJMwry+qngtZbtp4r9iyDHPcZoAPimNUcY3+Pw2l+t7T5cC3FfGYIR9rSXrtXaJ34k/k5YW3vRjLwpO2jtxjBDZBdTxp8MsbA9CnlcTUqqpD8iY0ogJqU0n8W/8U3w5Bf7RlgYhv7YozTg2CjKAYFbTEhvYveRxK3OXnigMjO5W6SRhh0PTgpn6orGk9KtDmCX40uz+efC9SgbsFU3avo0SEaczFssHqY+1R9fkrG7ZPBXU669Rly/dyA22sU5eb5lJp9C1zfdqW4YfxS/0t

configMaps:
  - name: config
    mountPath: /config
    subPath: config.yaml
    content:
      libraries:
        Filme:
          operations:
            delete_collections:
              configured: false
              managed: true
          collection_files:
            - file: /config/movies.yaml
            - pmm: trakt
              template_variables:
                language: de
                use_collected: false
                use_recommended: false
                use_watched: false
                visible_library_popular: true
                visible_home_popular: true
                visible_shared_popular: true
            - pmm: imdb
              template_variables:
                language: de
                use_lowest: false
                visible_library_top: true
                visible_home_top: true
                visible_shared_top: true
            - pmm: flixpatrol
              template_variables:
                language: de
                location: germany
            - pmm: seasonal
              template_variables:
                language: de
                use_separator: false
                use_years: true
                use_valentine: true
                use_patrick: false
                use_easter: true
                use_mother: false
                use_memorial: false
                use_father: false
                use_independence: false
                use_labor: false
                use_halloween: true
                use_veteran: false
                use_thanksgiving: false
                use_christmas: true
                use_aapi: false
                use_disabilities: false
                use_black_history: false
                use_lgbtq: false
                use_latinx: false
                use_women: false
            - pmm: based
              template_variables:
                language: de
                use_separator: false
            - pmm: oscars
              template_variables:
                language: de
                visible_library_popular: true
                visible_home_popular: true
                visible_shared_popular: true
                data:
                  starting: latest-3
                  ending: latest
            - pmm: oscars
              template_variables:
                language: de
                use_year_collections: true
                visible_library_popular: true
                visible_home_popular: true
                visible_shared_popular: true
        Serien: {}
      settings:
        tvdb_language: de
        # disable for plex
        verify_ssl: false
      plex:
        url: https://plex:32400
        token: <<SECRET_PLEX_TOKEN>>
        clean_bundles: true
        optimize: true
        empty_trash: true
      trakt:
        client_id: <<SECRET_TRAKT_CLIENT_ID>>
        client_secret: <<SECRET_TRAKT_CLIENT_SECRET>>
        authorization:
          access_token: <<SECRET_TRAKT_ACCESS_TOKEN>>
          token_type: Bearer
          expires_in: 7889238
          refresh_token: <<SECRET_TRAKT_REFRESH_TOKEN>>
          scope: public
          created_at: 1722187704
      tmdb:
        apikey: <<SECRET_TMDB_API_KEY>>
        language: de
        region: DE

  - name: config-series
    mountPath: /config
    subPath: movies.yaml
    content:

      templates:
        Movies_Best_of_Year:
          trakt_list: https://trakt.tv/users/lish408/lists/rotten-tomatoes-best-of-<<key>>
          sort_title: 01_Best of <<key>>
          sync_mode: sync
          summary: Rotten Tomatoes - Die besten Film von <<key>>
          collection_order: release
          collection_minimum: 3
          delete_below_minimum: true
          visible_library: true
          visible_shared: false
          visible_home: false
          url_poster: https://raw.githubusercontent.com/meisnate12/Plex-Meta-Manager-Images/master/year/best/<<key>>.jpg

      dynamic_collections:
        Best_Movies_of_Year:
          type: number
          sync: true
          data:
            starting: 2014
            ending: current_year-1
          title_format: üçÖ Das Beste von <<key_name>>
          template:
            - Movies_Best_of_Year

hostPaths:
  - name: config
    hostPath: /srv/nvme/container-data/kometa
    containerPath: /config
