image:
  repository: "skaronator/radicale"
  tag: "profiling-1@sha256:5b09a60aed605ba2f6212a20cc31536b4c31cb472fa5a8834048e54f39c7cf5f"

hostPaths:
- name: data
  hostPath: /srv/nvme/container-data/radicale
  containerPath: /data

command:
  - --config
  - /config/config

ports: 
- name: main
  containerPort: 5232

ingress:
  host: radicale.wagner.gg

configMaps:
- name: config
  mountPath: /config
  subPath: config
  content: |
    [server]
    hosts = 0.0.0.0:5232

    [auth]
    type = htpasswd
    htpasswd_encryption = bcrypt
    htpasswd_filename = /config/htpasswd
    delay = 5

    [storage]
    type = multifilesystem
    filesystem_folder = /data

    [rights]
    type = owner_only

    [web]
    type = internal

    [logging]
    level = info
    mask_passwords = True

- name: htpasswd
  mountPath: /config
  subPath: htpasswd
  content: |
    niklas:$2a$16$hQhoXDqRRv7rXriCWoBV3uU9KDCMr4sG8yG8hzFrx4WmxuFLP6rfC
